---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: chopper
description: Secureblue hyprland
alt-tags:
  - secureblue-nvidia-open-hyprland

base-image: ghcr.io/secureblue/wayblue-hyprland-nvidia-open-hardened
image-version: 41

modules:
  - type: rpm-ostree
    replace:
      - from-repo: https://copr.fedorainfracloud.org/coprs/ryanabx/cosmic-epoch/repo/fedora-%OS_VERSION%/ryanabx-cosmic-epoch-fedora-%OS_VERSION%.repo
        packages:
        - cosmic-desktop
    remove:
      - cosmic-greeter
  - type: rpm-ostree
    remove:
      - xdg-desktop-portal-hyprland
    repos:
      - https://copr.fedorainfracloud.org/coprs/solopasha/hyprland/repo/fedora-%OS_VERSION%/solopasha-hyprland-fedora-%OS_VERSION%.repo
      - https://copr.fedorainfracloud.org/coprs/erikreider/SwayNotificationCenter/repo/fedora-%OS_VERSION%/erikreider-SwayNotificationCenter-fedora-%OS_VERSION%.repo
    install:
      # Hypr
      #- hyprland-git
      - hyprlock
      - hypridle
      - hyprpicker
      - hyprshot
      - hyprcursor
      - xcur2png
      - xdg-desktop-portal-gtk
      - swww

      # Bar
      - waybar
      - SwayNotificationCenter

      # launchers
      - rofi-wayland
  - from-file: common/packages.yml
  - from-file: common/chezmoi.yml
  - from-file: common/files.yml

  - type: script
    scripts:
      - nvidia/nvidia-powerlimit.sh

  - from-file: common/scripts.yml

  - type: signing