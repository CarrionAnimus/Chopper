---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: chopper
description: Secureblue hyprland
alt-tags:
  - secureblue-nvidia-open-hyprland

base-image: ghcr.io/secureblue/wayblue-hyprland-nvidia-open-hardened
image-version: 41

modules:
  - from-file: common/packages.yml
  - type: rpm-ostree
    install:
      - xdg-desktop-portal-gtk
  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/solopasha/hyprland/repo/fedora-%OS_VERSION%/solopasha-hyprland-fedora-%OS_VERSION%.repo
      - https://copr.fedorainfracloud.org/coprs/erikreider/SwayNotificationCenter/repo/fedora-%OS_VERSION%/erikreider-SwayNotificationCenter-fedora-%OS_VERSION%.repo
    install:
      - hyprcursor
      - hyprshot
      - hyprpicker
      - xcur2png
      - swww
      - SwayNotificationCenter
    replace:
      - from-repo: https://copr.fedorainfracloud.org/coprs/solopasha/hyprland/repo/fedora-%OS_VERSION%/solopasha-hyprland-fedora-%OS_VERSION%.repo
        packages:
          - xdg-desktop-portal-hyprland
          - hyprland-git
  - from-file: common/chezmoi.yml
  - from-file: common/files.yml

  - type: script
    scripts:
      - nvidia/nvidia-powerlimit.sh

  - from-file: common/scripts.yml

  - type: signing